{% extends "layout.html" %}
{% block body %}
<div>ドラッグ・アンド・ドロップで順序変更</div>
<form method="post" action="{{ url_for('save') }}">
  <table class="playlist">
    <thead>
      <tr>
        <th>Title</th>
        <th>Artist</th>
      </tr>
    </thead>
    <tbody>
    {% for track in tracks %}
      <tr>
        <th>{{ track['name'] }}</th>
        <th>{{ track['artists'][0]['name'] }}</th>
        <input type="hidden" name="track_id" value="{{ track['id'] }}">
      </tr>
    {% endfor %}
    </tbody>
  </table>
  <div>
    <label for="playlist_name">{{ form.playlist_name.label }}:</label>
    <input type="text" id="playlist_name" name="playlist_name" required>
  </div>
  <div><button type="submit">保存</button></div>
</form>
{% endblock %}
{% block script %}
<script src="https://cdn.jsdelivr.net/npm/@shopify/draggable@1.0.0-beta.7/lib/sortable.js"></script>
<script>
  const sortable = new Sortable.default(document.querySelector('tbody'), {
      draggable: 'tr'
  });
</script>
{% endblock %}
